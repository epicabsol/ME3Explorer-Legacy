<global:WPFBase x:Class="ME3Explorer.PackageEditorWPF"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:global="clr-namespace:ME3Explorer"
        mc:Ignorable="d"
        xmlns:System="clr-namespace:System;assembly=mscorlib"
        xmlns:local="using ME3Explorer.PackageEditorWPF"
        xmlns:sharedui="clr-namespace:ME3Explorer.SharedUI"
        Loaded="PackageEditorWPF_Loaded"
        xmlns:hb1="clr-namespace:Be.Windows.Forms;assembly=Be.Windows.Forms.HexBox"
                xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
                Title="Package Editor" Height="530" Width="970">
    <Window.Resources>
        <ItemsPanelTemplate x:Key="VSP">
            <VirtualizingStackPanel/>
        </ItemsPanelTemplate>
    </Window.Resources>
    <Window.CommandBindings>
        <CommandBinding Command="Open" Executed="OpenCommandBinding_Executed"></CommandBinding>
        <CommandBinding Command="Save" Executed="SaveCommandBinding_Executed"></CommandBinding>
        <CommandBinding Command="SaveAs" Executed="SaveAsCommandBinding_Executed"></CommandBinding>
    </Window.CommandBindings>
    <Window.InputBindings>
        <KeyBinding Key="O" Modifiers="Control" Command="Open"></KeyBinding>
        <KeyBinding Key="S" Modifiers="Control" Command="Save"></KeyBinding>
        <KeyBinding Key="S" Modifiers="Control+Shift" Command="SaveAs"></KeyBinding>
    </Window.InputBindings>
    <DockPanel>
        <Menu Padding="4" DockPanel.Dock="Top">
            <MenuItem Header="File">
                <MenuItem Header="_Open" Command="Open" InputGestureText="Ctrl+O"/>
                <MenuItem Header="_Save"  Command="Save" InputGestureText="Ctrl+S"/>
                <MenuItem Header="Save as" Command="SaveAs" InputGestureText="Ctrl+Shift+S"/>
                <MenuItem Header="Open in...">
                    <MenuItem Header="Dialogue Editor"/>
                    <MenuItem Header="FaceFX Editor"/>
                    <MenuItem Header="Pathfinding Editor"/>
                    <MenuItem Header="Sequence Editor"/>
                </MenuItem>
                <Separator />
                <MenuItem Name="Recents_MenuItem" Header="Recent" IsEnabled="false"/>
            </MenuItem>
            <MenuItem Header="Edit">
                <MenuItem Header="Open"/>
                <MenuItem Header="Save"/>
            </MenuItem>
            <MenuItem Header="Modmaker">
                <MenuItem Header="Open"/>
                <MenuItem Header="Save"/>
            </MenuItem>
            <MenuItem Header="Testing &amp; Debugging">
                <MenuItem Header="Open"/>
                <MenuItem Header="Save"/>
            </MenuItem>
        </Menu>
        <StatusBar Height="23" DockPanel.Dock="Bottom">
            <StatusBarItem>
                <TextBlock Name="StatusBar_LeftMostText" Text="Status goes here" />
            </StatusBarItem>
        </StatusBar>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="1*"/>
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3*" />
                <ColumnDefinition Width="5" />
                <ColumnDefinition Width="6*" />
            </Grid.ColumnDefinitions>
            <ToolBar ToolBarTray.IsLocked="True" Grid.Row="0" Grid.ColumnSpan="3">
                <Button Content="Names" Height="22" Margin="3" Click="NamesView_Click"/>
                <Button Content="Imports" Height="22" Click="ImportsView_Click"/>
                <Button Content="Exports" Height="22" Margin="3" Click="ExportsView_Click"/>
                <Button Content="Tree View"  Height="22" Click="TreeView_Click"/>
                <ComboBox Name="ClassDropdown_Combobox" Width="70" ItemsPanel="{StaticResource VSP}"/>
                <Button Content="Find"/>
                <TextBox Name="Search_TextBox" Width="70"/>
                <Button Content="Search"/>
                <TextBox Name="Goto_TextBox" Width="70"/>
                <Button Content="Goto #"/>
            </ToolBar>
            <ListView Name="LeftSide_ListView" Grid.Column="0" Grid.Row="1"  SelectionChanged="LeftSide_SelectedItemChanged"/>
            <TreeView x:Name="LeftSide_TreeView" Grid.Column="0" Grid.Row="1" Visibility="Collapsed" TreeViewItem.Selected="LeftSide_SelectedItemChanged" FontFamily="Consolas" VirtualizingStackPanel.IsVirtualizing="True" VirtualizingStackPanel.VirtualizationMode="Recycling"/>
            <GridSplitter Grid.Column="1" Width="5" HorizontalAlignment="Stretch" Grid.Row="1"/>
            <TabControl Grid.Column="2" Grid.Row="1">

                <!--<TabItem Name="Properties_Tab" Header="Properties"/>-->
                <TabItem Name="Interpreter_Tab" Header="Interpreter">
                    <global:InterpreterWPF x:Name="InterpreterTab_Interpreter"/>
                </TabItem>
                <TabItem Name="Info_Tab"  Header="Metadata">
                    <TabItem.Resources>
                        <System:Int32 x:Key="InfoTab_TopMargins">24</System:Int32>
                        <System:Int32 x:Key="InfoTab_MaxWidth">700</System:Int32>
                    </TabItem.Resources>
                    <Grid Margin="5" HorizontalAlignment="Stretch">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="{Binding Source={StaticResource InfoTab_TopMargins}}">
                                <RowDefinition.Style>
                                    <Style TargetType="{x:Type RowDefinition}">
                                        <Setter Property="Height" Value="Auto" />
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding Visible_ObjectNameRow}" Value="False">
                                                <Setter Property="Height" Value="0" />
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </RowDefinition.Style>
                            </RowDefinition>
                            <RowDefinition Height="{Binding Source={StaticResource InfoTab_TopMargins}}"/>
                            <RowDefinition Height="{Binding Source={StaticResource InfoTab_TopMargins}}"/>
                            <RowDefinition Height="{Binding Source={StaticResource InfoTab_TopMargins}}"/>
                            <RowDefinition Height="{Binding Source={StaticResource InfoTab_TopMargins}}"/>
                            <RowDefinition Height="{Binding Source={StaticResource InfoTab_TopMargins}}"/>
                            <RowDefinition Height="{Binding Source={StaticResource InfoTab_TopMargins}}"/>
                            <RowDefinition Height="{Binding Source={StaticResource InfoTab_TopMargins}}"/>
                            <RowDefinition Height="10"/>
                            <RowDefinition Height="auto"/>
                            <RowDefinition Height="150"/>
                            <RowDefinition Height="25"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="130"/>
                            <ColumnDefinition Width="1*" MaxWidth="600"/>
                        </Grid.ColumnDefinitions>
                        <Grid.Resources>
                            <Style TargetType="{x:Type TextBox}">
                                <Style.Triggers>
                                    <Trigger Property="IsReadOnly" Value="True">
                                        <Setter Property="Background" Value="LightGray" />
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Grid.Resources>
                        <TextBlock VerticalAlignment="Center" Text="0x0C Object Name:" Grid.Row="0" Grid.Column="0"/>
                        <TextBlock VerticalAlignment="Center" Text="0x00 Class:" Grid.Row="1" Grid.Column="0"/>
                        <TextBlock VerticalAlignment="Center" Text="0x04 Superclass:" Grid.Row="2" Grid.Column="0"/>
                        <TextBlock VerticalAlignment="Center" Text="0x08 Package name:" Grid.Row="3" Grid.Column="0"/>
                        <TextBlock VerticalAlignment="Center" Text="0x10 Index:" Grid.Row="4" Grid.Column="0"/>
                        <TextBlock VerticalAlignment="Center" Text="0x14 Archetype name:" Grid.Row="5" Grid.Column="0"/>
                        <TextBlock VerticalAlignment="Center" Text="0x18 Object flags:" Grid.Row="6" Grid.Column="0"/>
                        <TextBlock VerticalAlignment="Center" Text="Header size:" Grid.Row="7" Grid.Column="0"/>
                        <ComboBox Name="InfoTab_Objectname_ComboBox" VerticalAlignment="Center" Grid.Row="0" Grid.Column="1" ItemsPanel="{StaticResource VSP}" SelectionChanged="Info_ObjectNameComboBox_SelectionChanged"/>
                        <ComboBox Name="InfoTab_Class_ComboBox" VerticalAlignment="Center" Grid.Row="1" Grid.Column="1" ItemsPanel="{StaticResource VSP}" SelectionChanged="Info_ClassComboBox_SelectionChanged"/>
                        <!--<TextBox Name="InfoTab_Objectname_TextBox" VerticalAlignment="Center" IsEnabled="False" Grid.Row="0" Grid.Column="1" IsReadOnly="true"/>-->
                        <!--<TextBox Name="InfoTab_Class_TextBox"  VerticalAlignment="Center" IsEnabled="False" Grid.Row="1" Grid.Column="1" IsReadOnly="true"/>-->
                        <!--<TextBox Name="InfoTab_Superclass_TextBox"  VerticalAlignment="Center" IsEnabled="False" Grid.Row="2" Grid.Column="1" IsReadOnly="true"/>-->
                        <ComboBox Name="InfoTab_Superclass_ComboBox" VerticalAlignment="Center" Grid.Row="2" Grid.Column="1" ItemsPanel="{StaticResource VSP}" SelectionChanged="Info_SuperClassComboBox_SelectionChanged"/>
                        <ComboBox Name="InfoTab_PackageLink_ComboBox" VerticalAlignment="Center" Grid.Row="3" Grid.Column="1" ItemsPanel="{StaticResource VSP}" SelectionChanged="Info_PackageLinkClassComboBox_SelectionChanged"/>

                        <!--<TextBox Name="InfoTab_Packagename_TextBox"  VerticalAlignment="Center" IsEnabled="False" Grid.Row="3" Grid.Column="1" IsReadOnly="true"/>-->
                        <TextBox Name="InfoTab_Index_TextBox"  VerticalAlignment="Center" Grid.Row="4" Grid.Column="1" TextChanged="Info_IndexTextBox_TextChanged"/>
                        <ComboBox Name="InfoTab_Archetype_ComboBox" VerticalAlignment="Center" Grid.Row="5" Grid.Column="1" ItemsPanel="{StaticResource VSP}"  SelectionChanged="Info_ArchetypeComboBox_SelectionChanged"/>

                        <!--<TextBox Name="InfoTab_Archetypename_TextBox"  VerticalAlignment="Center" IsEnabled="False" Grid.Row="5" Grid.Column="1" IsReadOnly="true"/>-->
                        <xctk:CheckComboBox Name="InfoTab_Flags_ComboBox" IsEditable="False" Delimiter=" " VerticalAlignment="Center" Grid.Row="6" Grid.Column="1"/>
                        <TextBox Name="InfoTab_Headersize_TextBox"  VerticalAlignment="Center" IsEnabled="False" Grid.Row="7" Grid.Column="1" IsReadOnly="true"/>
                        <Separator Grid.ColumnSpan="2" Grid.Row="8"/>
                        <StackPanel Grid.ColumnSpan="2" Orientation="Horizontal" Grid.Row="9">
                            <TextBlock Text="0x20 Export data size:" Margin="0,0,3,0"  VerticalAlignment="Center"/>
                            <TextBox Name="InfoTab_ExportDataSize_TextBox" Width="100" IsReadOnly="true"  VerticalAlignment="Center"/>
                            <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}" Margin="3,0,0,0"  VerticalAlignment="Stretch"/>

                            <Button Name="Info_HeaderHexSaveChanges" Content="Save hex changes"  Margin="3,0,3,0" Padding="2" Click="Info_HeaderHexSaveChanges_Click"/>
                            <TextBlock Name="Info_Header_UnsavedChanges" Text="Changes not yet saved" Foreground="Red" Margin="0,0,3,0"  VerticalAlignment="Center" Visibility="Hidden"/>

                        </StackPanel>
                        <!--<StackPanel Grid.ColumnSpan="2" Orientation="Horizontal" Grid.Row="10"  Width="Auto" Height="Auto" Margin="0,5,0,0"  MaxWidth="650">-->
                        <!--Grid.Row="10" Grid.ColumnSpan="2"-->
                        <WindowsFormsHost Name="Header_Hexbox_Host" Background="Yellow" Grid.Row="10" Grid.ColumnSpan="2" Margin="0,5,0,0"  MaxWidth="730" HorizontalAlignment="Stretch">
                            <hb1:HexBox  MinBytesPerLine="4" MaxBytesPerLine="16" BytesPerLine="16" ColumnInfoVisible="True" LineInfoVisible="True" UseFixedBytesPerLine="True" Font="Courier New,10" BoldFont="Consolas,10" StringViewVisible="True">
                            </hb1:HexBox>
                        </WindowsFormsHost>
                        <!--</StackPanel>-->
                        <StackPanel Grid.ColumnSpan="2" Orientation="Horizontal" Grid.Row="11" Margin="0,5,0,0">

                            <TextBlock Text="0x24 Data offset (hex):"  Margin="3,0,3,0"  VerticalAlignment="Center"/>
                            <TextBox Name="InfoTab_ExportOffsetHex_TextBox" Width="80" IsReadOnly ="true" VerticalAlignment="Center"/>
                            <Separator Style="{StaticResource {x:Static ToolBar.SeparatorStyleKey}}" Margin="3,0,0,0"  VerticalAlignment="Stretch"/>
                            <TextBlock Text="Data offset (dec):" Margin="3,0,3,0"  VerticalAlignment="Center"/>
                            <TextBox Name="InfoTab_ExportOffsetDec_TextBox" Width="80" IsReadOnly="True" VerticalAlignment="Center"/>
                            <!--<control:HexEditor Name="Info_HeaderRaw_Hexbox" Width="Auto" Height="Auto" Margin="0,5,0,0" Grid.Row="10" Grid.ColumnSpan="2"/>-->
                        </StackPanel>
                    </Grid>
                </TabItem>
                <TabItem Name="Bio2DAViewer_Tab" Header="Bio2DA Viewer"/>
                <TabItem Name="BinaryInterpreter_Tab" Header="Binary Interpreter"/>
                <TabItem Name="Script_Tab" Header="Script">
                    <TextBox Name="Script_TextBox" TextWrapping="Wrap" Text="if(visible) ShowThis()" IsReadOnly="True" FontFamily="Consolas" Padding="5"/>
                </TabItem>
            </TabControl>
        </Grid>
    </DockPanel>
</global:WPFBase>
